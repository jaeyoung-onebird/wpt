(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{3737:function(e,t,s){Promise.resolve().then(s.bind(s,3350))},3350:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var n=s(7437),r=s(2265),a=s(6013),l=s(495),c=s(3102),i=s(4693),d=s(4817),o=s(9338);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,s(3480).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var x=s(518),m=s(7592),h=s(6264);function f(){let[e,t]=(0,r.useState)([]),[s,f]=(0,r.useState)(0),[p,j]=(0,r.useState)(1),[N,g]=(0,r.useState)(""),[b,v]=(0,r.useState)(!0),[y,w]=(0,r.useState)(null),k=async()=>{v(!0);try{let e={page:p,size:20};N&&(e.search=N);let s=await h.Nq.getWorkers(e);t(s.data.items),f(s.data.total)}catch(e){console.error("Failed to fetch workers:",e)}finally{v(!1)}};(0,r.useEffect)(()=>{k()},[p]);let _=()=>{j(1),k()},S=async(e,t)=>{let s=prompt("신뢰점수 변경 사유를 입력하세요:");if(s)try{await h.Nq.updateTrustScore(e,{trust_score:t,reason:s}),w(null),k()}catch(e){console.error("Failed to update trust score:",e),alert("신뢰점수 변경에 실패했습니다. Super Admin 권한이 필요합니다.")}},C=e=>e>=90?"text-green-600":e>=70?"text-blue-600":e>=50?"text-yellow-600":"text-red-600",z=Math.ceil(s/20);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"근무자 관리"}),(0,n.jsxs)(i.C,{variant:"outline",children:[s,"명"]})]}),(0,n.jsx)(a.Zb,{children:(0,n.jsx)(a.aY,{className:"p-4",children:(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(c.I,{placeholder:"닉네임, 실명, 전화번호 검색",value:N,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&_(),className:"max-w-sm"}),(0,n.jsx)(l.z,{variant:"outline",onClick:_,children:(0,n.jsx)(d.Z,{className:"h-4 w-4"})})]})})}),(0,n.jsx)(a.Zb,{children:(0,n.jsxs)(a.aY,{className:"p-0",children:[(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b bg-muted/50",children:[(0,n.jsx)("th",{className:"p-4 text-left font-medium",children:"닉네임"}),(0,n.jsx)("th",{className:"p-4 text-left font-medium",children:"실명"}),(0,n.jsx)("th",{className:"p-4 text-left font-medium",children:"전화번호"}),(0,n.jsx)("th",{className:"p-4 text-left font-medium",children:"지역"}),(0,n.jsx)("th",{className:"p-4 text-center font-medium",children:"신뢰점수"}),(0,n.jsx)("th",{className:"p-4 text-center font-medium",children:"근무"}),(0,n.jsx)("th",{className:"p-4 text-center font-medium",children:"노쇼"}),(0,n.jsx)("th",{className:"p-4 text-center font-medium",children:"지각"}),(0,n.jsx)("th",{className:"p-4 text-center font-medium",children:"가입경로"}),(0,n.jsx)("th",{className:"p-4 text-center font-medium",children:"가입일"})]})}),(0,n.jsx)("tbody",{children:b?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:10,className:"p-8 text-center text-muted-foreground",children:"로딩 중..."})}):0===e.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:10,className:"p-8 text-center text-muted-foreground",children:"근무자가 없습니다"})}):e.map(e=>(0,n.jsxs)("tr",{className:"border-b hover:bg-muted/50",children:[(0,n.jsx)("td",{className:"p-4 font-medium",children:e.nickname}),(0,n.jsx)("td",{className:"p-4 text-muted-foreground",children:e.real_name||"-"}),(0,n.jsx)("td",{className:"p-4 text-muted-foreground",children:e.phone||"-"}),(0,n.jsx)("td",{className:"p-4",children:e.region||"-"}),(0,n.jsx)("td",{className:"p-4 text-center",children:(null==y?void 0:y.id)===e.id?(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)(c.I,{type:"number",min:"0",max:"100",value:y.score,onChange:e=>w({...y,score:parseInt(e.target.value)||0}),className:"h-8 w-16 text-center"}),(0,n.jsx)(l.z,{size:"sm",onClick:()=>S(e.id,y.score),children:"저장"}),(0,n.jsx)(l.z,{size:"sm",variant:"ghost",onClick:()=>w(null),children:"취소"})]}):(0,n.jsxs)("button",{className:"flex items-center justify-center gap-1 font-bold ".concat(C(e.trust_score)),onClick:()=>w({id:e.id,score:e.trust_score}),children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),e.trust_score]})}),(0,n.jsx)("td",{className:"p-4 text-center",children:e.total_jobs}),(0,n.jsx)("td",{className:"p-4 text-center",children:e.no_show_count>0?(0,n.jsxs)("span",{className:"flex items-center justify-center gap-1 text-red-600",children:[(0,n.jsx)(u,{className:"h-4 w-4"}),e.no_show_count]}):"0"}),(0,n.jsx)("td",{className:"p-4 text-center",children:e.late_count>0?(0,n.jsx)("span",{className:"text-yellow-600",children:e.late_count}):"0"}),(0,n.jsx)("td",{className:"p-4 text-center",children:(0,n.jsx)(i.C,{variant:"outline",className:"text-xs",children:"direct"===e.signup_source?"직접":"invite"===e.signup_source?"초대":e.signup_source})}),(0,n.jsx)("td",{className:"p-4 text-center text-muted-foreground",children:new Date(e.created_at).toLocaleDateString("ko-KR")})]},e.id))})]})}),z>1&&(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2 border-t p-4",children:[(0,n.jsx)(l.z,{variant:"outline",size:"sm",disabled:1===p,onClick:()=>j(e=>e-1),children:(0,n.jsx)(x.Z,{className:"h-4 w-4"})}),(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[p," / ",z]}),(0,n.jsx)(l.z,{variant:"outline",size:"sm",disabled:p===z,onClick:()=>j(e=>e+1),children:(0,n.jsx)(m.Z,{className:"h-4 w-4"})})]})]})})]})}},3102:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var n=s(7437),r=s(2265),a=s(7440);let l=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,n.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});l.displayName="Input"},4817:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(3480).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9338:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(3480).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])}},function(e){e.O(0,[868,472,757,971,23,744],function(){return e(e.s=3737)}),_N_E=e.O()}]);